<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Chapter 4. Vagrantfile</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="home" href="index.html" title="Vagrant" /><link rel="up" href="index.html" title="Vagrant" /><link rel="prev" href="getting_into_your_box.html" title="3.2. Getting into your box" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 4. Vagrantfile</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="getting_into_your_box.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> </td></tr></table><hr /></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="vagrantfile"></a>Chapter 4. Vagrantfile</h1></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="section"><a href="vagrantfile.html#port_forwarding">4.1. Port forwarding</a></span></dt></dl></div>

<p><span class="emphasis"><em>Vagrantfile</em></span> is a configuration file.  It was created when you issued
the command <code class="literal">vagrant init</code>. It’s written in the Ruby language, so it'
s very easy to read. There are a lot of defaults that
are already defined in this config file. You simply need to uncomment
them if you need to enable any particular functionality e.g. port
forwarding etc. The Vagrantfile has a simple structure, everything is
inside the <code class="literal">Vagrant configure</code> block. See the code example below</p>
<div class="example"><a id="idm527373991696"></a><p class="title"><strong>Example 4.1. Vagrantfile</strong></p><div class="example-contents">

<pre class="literallayout">Vagrant configure(2) do |config|
   # various configurations
end</pre>
</div></div><br class="example-break" />
<div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="port_forwarding"></a>4.1. Port forwarding</h2></div></div></div>

<p>Vagrant boxes are kind of insecure out of the box. That’s why the
<span class="emphasis"><em>public_network</em></span> setting is commented by default. Think of it this
way, a computer on a private network is usually behind a firewall
and/or a router. Most computers on an office setting belong to this
category. Your office workstation is not reachable from the internet
because because it is behind a router.</p>
<p>When you create a vagrant project, the vm is on a private network.
That means you cannot reach any of its ports from the host machine,
unless you define a public network. Having a vm that is not accessible
from your host machine is not very useful, so we need a way to reach
the applications running on the vm. One way to do it via port
forwarding. Basically, we will map a port number on the host machine
to a port of on the guest machine (your vm). That way, when we try to
communicate to a port on the host machine, that request will be
forwarded to the port of the guest machine, thus making the services
of the guest machine reachable.</p>
<div class="example"><a id="idm527373987680"></a><p class="title"><strong>Example 4.2. port forwarding configuration</strong></p><div class="example-contents">

<pre class="literallayout">config.vm.network "forwarded_port", guest:80,  host:8080, id: "whatever" <a id="CO5-1"></a><span><img src="images/callouts/1.png" alt="1" border="0" /></span><a id="CO5-2"></a><span><img src="images/callouts/2.png" alt="2" border="0" /></span><a id="CO5-3"></a><span><img src="images/callouts/3.png" alt="3" border="0" /></span></pre>
</div></div><br class="example-break" />
<div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO5-1"><span><img src="images/callouts/1.png" alt="1" border="0" /></span></a> </p></td><td valign="top" align="left">
<p><code class="literal">guest:80</code>. The vm will listen on port 80, this is usually a web
server like Apache or NGinx or any other webserver that you want to
use</p>
</td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO5-2"><span><img src="images/callouts/2.png" alt="2" border="0" /></span></a> </p></td><td valign="top" align="left">
<p><code class="literal">host:8080</code>. This is the port on the host machine (your actual PC
where the vagrant is installed). When you launch a browser and go to
<a class="ulink" href="http://localhost:8080" target="_top">http://localhost:8080</a>, you are actually hitting the port 80 of your vm</p>
</td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO5-3"><span><img src="images/callouts/3.png" alt="3" border="0" /></span></a> </p></td><td valign="top" align="left">
<p><code class="literal">id: whatever</code>. This is optional, but it is always a good idea to
to put an id on your port mapping definition</p>
</td></tr></table></div>
<p>You can forward more than one port. If you need to open more ports on
the guest machine, just define each mapping on its line</p>
<div class="example"><a id="idm527373978512"></a><p class="title"><strong>Example 4.3. forwarding more than one port</strong></p><div class="example-contents">

<pre class="literallayout">config.vm.network "forwarded_port", guest:80,  host:8080, id: "apache"
config.vm.network "forwarded_port", guest:4000,  host:3000, id: "node"</pre>
</div></div><br class="example-break" />
</div>
</div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="getting_into_your_box.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> </td></tr><tr><td width="40%" align="left" valign="top">3.2. Getting into your box </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> </td></tr></table></div></body></html>